#!/bin/bash
# shellcheck disable=all
# find the log file for a given task at a given cycle
# by Guoqing Ge, 2025/07
#
if [[ ! -s exp.setup ]]; then
  echo "Run this command under the expdir where exp.setup is located"
  exit
fi
source exp.setup
if [[ $# < 2 ]]; then
  echo "$(basename $0) <YYYYMMDDHH|YYYYMMDDHHmm> <task>"
  exit
fi

RUN=rrfs

CDATE=$1
task=$2
PDY=${CDATE:0:8}
cyc=${CDATE:8:2}
logroot=${COMROOT}/${NET}/${VERSION}/logs
logfile="${logroot}/${RUN}.${PDY}/${cyc}/${WGF}/${RUN}_${task}_${TAG}_${PDY}${cyc}.log"
echo "----log file:"
ls ${logfile}*

echo -e  "\n---com output:"
comout="${COMROOT}/${NET}/${VERSION}/${RUN}.${PDY}/${cyc}/${task}/${WGF}"
echo "${comout}"
if [[ ! -d "${comout}" ]]; then
  echo " !!! the above directory either NOT created, or has been purged !!!"
fi

echo -e "\n---stmp output:"
stmpout="${DATAROOT}/${PDY}/${RUN}_${task}_${cyc}_${VERSION}/${WGF}"
echo "${stmpout}"
if [[ ! -d "${stmpout}" ]]; then
  echo " !!! the above directory either NOT created, or has been purged !!!"
fi

