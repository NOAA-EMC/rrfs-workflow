bufr:
  variables:
    # MetaData
    timestamp:
      datetime:
        year: "*/YEAR"
        month: "*/MNTH"
        day: "*/DAYS"
        hour: "*/HOUR"
        minute: "*/MINU"
        second: "*/SECO"

    latitude:
      query: "*/CLATH"

    longitude:
      query: "*/CLONH"

    satelliteId:
      query: "*/SAID"

    sensorId:
      query: "*/SIID[1]"

    scanLineNumber:
      query: "*/SLNM"

    fieldOfViewNumber:
      query: "*/FOVN"

    fieldOfRegardNumber:
      query: "*/FORN"

    sensorScanPosition:
      query: "*/FORN"

    solarZenithAngle:
      query: "*/SOZA"

    solarAzimuthAngle:
      query: "*/SOLAZI"

    sensorZenithAngle:
      query: "*/SAZA"

    sensorAzimuthAngle:
      query: "*/BEARAZ"

    sensorViewAngle:
      sensorScanAngle:
        fieldOfViewNumber: "*/FOVN"
        fieldOfRegardNumber: "*/FORN"
        scanStart: -48.330
        scanStep: 3.3331
        sensor: cris

    sensorChannelNumber:
      query: "*/CRCHNM/CHNM"

    cloudCoverTotal:
      query: "*/TOCC"
      type: float
    #  transforms:
    #    - scale: 0.01

    cloudTopHeight:
      query: "*/HOCT"
      type: float

    # radiance unit used in JEDI for SatBrightnessTempFromRad : W M**-2 SR**-1 M
    spectralRadiance:
      query: "*/CRCHNM/SRAD"
      transforms:
        - scale: 0.01

  splits:
    satId:
      category:
        variable: satelliteId
        map:
          #_224: npp
          _225: n20
          _226: n21

encoder:
  dimensions:
    - name: Channel
      source: variables/sensorChannelNumber
      path: "*/CRCHNM"

  globals:
    - name: "description"
      type: string
      value: "Level-1C CrIS radiance spectra apodized using the standard Hamming window, with full radiometric calibration and geolocation"

    - name: "platformCommonName"
      type: string
      value: "JPSS"

    - name: "platformLongDescription"
      type: string
      value: "NOAA Joint Polar Satellite System"

    - name: "sensorCommonName"
      type: string
      value: "CrIS"

    - name: "sensorLongDescription"
      type: string
      value: "Cross-track Infrared Sounder (Interferometer) with three IR bands with 2211 channels; cross-track scanning"

    - name: "source"
      type: string
      value: "U.S. National Weather Service, National Centres for Environmental Prediction (NCEP))"

    - name: "sourceFiles"
      type: string
      value: "NCEP BUFR Dump - crisf4 NC021206 Normal Feed 431 channel subset"

    - name: "processingLevel"
      type: string
      value: "Level-1C"

    - name: "converter"
      type: string
      value: "bufr-query"

  variables:

    # MetaData
    - name: "MetaData/dateTime"
      source: variables/timestamp
      longName: "Datetime"
      units: "seconds since 1970-01-01T00:00:00Z"

    - name: "MetaData/latitude"
      source: variables/latitude
      longName: "Latitude"
      units: "degrees_north"
      range: [ -90, 90 ]

    - name: "MetaData/longitude"
      source: variables/longitude
      longName: "Longitude"
      units: "degrees_east"
      range: [ -180, 180 ]

    - name: "MetaData/satelliteIdentifier"
      source: variables/satelliteId
      longName: "Satellite Identifier"

    #    - name: "MetaData/instrumentIdentifier"
    #      source: variables/sensorId
    #      longName: "Satellite Instrument Identifier"

    - name: "MetaData/scanLineNumber"
      source: variables/scanLineNumber
      longName: "Scan Line Number"

    - name: "MetaData/fieldOfViewNumber"
      source: variables/fieldOfViewNumber
      longName: "Field of View Number"

    - name: "MetaData/fieldOfRegardNumber"
      source: variables/fieldOfRegardNumber
      longName: "Field of Regard Number"

    - name: "MetaData/sensorScanPosition"
      source: variables/sensorScanPosition
      longName: "Sensor Scan Position"

    - name: "MetaData/solarZenithAngle"
      source: variables/solarZenithAngle
      longName: "Solar Zenith Angle"
      units: "degree"
      range: [ 0, 180 ]

    - name: "MetaData/solarAzimuthAngle"
      source: variables/solarAzimuthAngle
      longName: "Solar Azimuth Angle"
      units: "degree"
      range: [ 0, 360 ]

    - name: "MetaData/sensorZenithAngle"
      source: variables/sensorZenithAngle
      longName: "Sensor Zenith Angle"
      units: "degree"
      range: [ 0, 90 ]

    - name: "MetaData/sensorAzimuthAngle"
      source: variables/sensorAzimuthAngle
      longName: "Sensor Azimuth Angle"
      units: "degree"
      range: [ 0, 360 ]

    - name: "MetaData/sensorViewAngle"
      source: variables/sensorViewAngle
      longName: "Sensor View Angle"
      units: "degree"

    - name: "MetaData/sensorChannelNumber"
      source: variables/sensorChannelNumber
      longName: "Sensor Channel Number"

    - name: "MetaData/cloudCoverTotal"
      source: variables/cloudCoverTotal
      longName: "Total Cloud Cover"
      units: "%"
      range: [ 0, 100 ]

    - name: "MetaData/heightOfTopOfCloud"
      source: variables/cloudTopHeight
      longName: "Height of Top of Cloud"
      units: "m"

    - name: "ObsValue/radiance"
      source: variables/spectralRadiance
      longName: "CrIS Spectral Radiance"
      units: "W m-2 sr-1 m"
